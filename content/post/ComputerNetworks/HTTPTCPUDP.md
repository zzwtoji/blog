---
date: "2025-11-24T09:05:14+08:00"
draft: false
title: "HTTP 与 TCP、UDP 的差异"
categories:
  - ComputerNetworks
tags:
  - HTTP
  - TCP
  - UDP
---

## 协议所属网络层

| 协议 | 网络层级 |
| ---- | -------- |
| HTTP | 应用层   |
| TCP  | 运输层   |
| UDP  | 运输层   |

## 连接特性

### 连接方式

- HTTP：间接连接，HTTP 在请求/响应前需先通过 TCP 建立连接，再传输数据。
- TCP：面向连接，传输前需通过三次握手建立连接，四次挥手断开连接。
- UDP：无连接，直接发送数据，无需断开流程。

### 连接持续性

- HTTP
  - HTTP/1.0：短连接，每次请求后断开 TCP 连接。
  - HTTP/1.1：长连接，同一域名下多个请求复用一个 TCP 连接。
  - HTTP/2：多路复用，多个请求在一个 TCP 连接上并发传输。
- TCP：建立连接后保持连接状态，可持续传输多批数据，直到双方发起断开请求。
- UDP：每次发送数据都是独立的数据包，无连接保持逻辑。

## 可靠性

### HTTP

依赖 TCP 实现可靠性。

HTTP 本身不具备重传、校验机制，数据是否丢失、有序，完全由底层 TCP 负责。

### TCP

可靠传输。

- 确认机制：接收方发 ACK 确认数据送达。
- 重传机制：超时未收到 ACK 则重传数据。
- 有序传输：通过序号标记数据顺序，接收方按序重组。
- 流量控制：防止发送方过快发送数据，避免接收方缓存溢出。
- 拥塞控制：根据网络状况调整发送速率，防止网络拥塞。

### UDP

不可靠传输。

- 无确认机制：发送数据后不等待接收方确认，无法确认数据是否送达。
- 无重传机制：数据丢失后不进行重传。
- 无序传输：数据包可能乱序到达，接收方需自行处理顺序问题。
- 无流量控制和拥塞控制：发送方按自身速率发送数据，可能导致接收方丢包。

## 数据完整性

### HTTP

依赖 TCP 的校验。

HTTP 数据完整性由 TCP 帧尾的 FCS 校验来保障，其自身仅通过部分头信息字段来辅助检测数据完整性。

### TCP

多层校验。

- TCP 校验：检测端到端的传输错误，检验整个 TCP 段。
- FCS 校验：检测链路层传输错误，检验整个帧。

### UDP

基础校验。

UDP 头部含校验和字段，仅对数据报进行简单校验，校验失败则直接丢弃，不反馈、不重传。

## 传输效率

### HTTP

- HTTP/1.0：每次请求建立新连接，开销大，效率低。
- HTTP/1.1：长连接复用，减少连接开销，提高效率。
- HTTP/2：多路复用，多个请求并发传输，进一步提升效率。

### TCP

效率低：连接建立和维护开销大，拥塞控制和流量控制机制降低传输速率。

### UDP

效率高：无连接开销，无拥塞和流量控制，数据报头部仅 8 字节。

## 适用场景

- HTTP
  - 网页加载
  - API 通信
- TCP
  - 可靠数据传输
  - 远程登录
  - 文件传输
- UDP
  - 实时通信
  - 视频直播
  - 在线游戏
  - DNS 查询

## 数据格式与传输单元

| 协议 | 数据格式                                                         | 传输单元                    |
| ---- | ---------------------------------------------------------------- | --------------------------- |
| HTTP | 请求报文：请求行+请求头+请求体<br>响应报文：状态行+响应头+响应体 | 基于 TCP 的字节流           |
| TCP  | 封装应用层数据为 TCP 段                                          | TCP 段：包含 TCP 头部和数据 |
| UDP  | UDP 数据报（Datagram）                                           | 数据报（Datagram）          |
